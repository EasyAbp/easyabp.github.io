(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{822:function(t,s,a){"use strict";a.r(s);var e=a(116),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、基本模块配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、基本模块配置"}},[t._v("#")]),t._v(" 一、基本模块配置")]),t._v(" "),a("h3",{attrs:{id:"_1-1-模块的引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-模块的引用"}},[t._v("#")]),t._v(" 1.1 模块的引用")]),t._v(" "),a("p",[t._v("添加 "),a("strong",[t._v("EasyAbp.Abp.WeChat.Official")]),t._v(" 模块的 NuGet 包或者项目引用到 "),a("strong",[t._v("Domain")]),t._v(" 层，并在对应的模块上面添加 "),a("code",[t._v("[DependsOn]")]),t._v(" 特性标签。")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token attribute"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DependsOn")]),a("span",{pre:!0,attrs:{class:"token attribute-arguments"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token type-expression class-name"}},[t._v("AbpWeChatOfficialModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XXXDomainModule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-list"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbpModule")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("添加 "),a("strong",[t._v("EasyAbp.Abp.WeChat.Official.HttpApi")]),t._v(" 模块的 NuGet 包或者项目引用到 "),a("strong",[t._v("Http.Api")]),t._v(" 层，并在对应的模块上面添加 "),a("code",[t._v("[DependsOn]")]),t._v(" 特性标签。")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token attribute"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DependsOn")]),a("span",{pre:!0,attrs:{class:"token attribute-arguments"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token type-expression class-name"}},[t._v("AbpWeChatOfficialHttpApiModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XXXHttpApiModule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-list"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbpModule")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-2-模块的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-模块的配置"}},[t._v("#")]),t._v(" 1.2 模块的配置")]),t._v(" "),a("p",[t._v("微信模块的配置参数都存放在 "),a("code",[t._v("AbpWeChatOfficialOptions")]),t._v(" 内部，开发人员只需要在启动模块的 "),a("code",[t._v("ConfigureService()")]),t._v(" 方法中进行配置即可，下面是最小启动配置。")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token attribute"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DependsOn")]),a("span",{pre:!0,attrs:{class:"token attribute-arguments"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token type-expression class-name"}},[t._v("AbpWeChatOfficialHttpApiModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XXXHttpApiModule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-list"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbpModule")])]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConfigureServices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceConfigurationContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token generic-method"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Configure")]),a("span",{pre:!0,attrs:{class:"token generic class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("AbpWeChatOfficialOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("op "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信公众号所配置的 Token 值。")]),t._v("\n            op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信公众号分配的 AppId。")]),t._v("\n            op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AppId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信公众号的唯一密钥。")]),t._v("\n            op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AppSecret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OAuth 授权回调，用于微信公众号网页使用授权码换取 AccessToken。")]),t._v("\n            op"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OAuthRedirectUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://test.hospital.wx.zhongfeiiot.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("进行上述配置以后，你的项目就集成了微信公众号功能。现在，你可以在任意地方注入服务类，通过服务类快捷地调用微信公众平台所提供的 API 接口服务。")]),t._v(" "),a("h2",{attrs:{id:"二、默认启用的接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、默认启用的接口"}},[t._v("#")]),t._v(" 二、默认启用的接口")]),t._v(" "),a("p",[t._v("// TODO。")]),t._v(" "),a("h2",{attrs:{id:"三、服务的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、服务的使用"}},[t._v("#")]),t._v(" 三、服务的使用")]),t._v(" "),a("h3",{attrs:{id:"_3-1-自定义菜单服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-自定义菜单服务"}},[t._v("#")]),t._v(" 3.1 自定义菜单服务")]),t._v(" "),a("p",[t._v("开发人员如果需要使用自定义菜单服务，只需要注入对应的服务即可。以下为具体的服务类型表，开发人员可自行参考文档进行注入使用。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型名称")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("微信官方文档")]),t._v(" "),a("th",[t._v("支持度")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("CustomMenuService")])]),t._v(" "),a("td",[t._v("自定义菜单服务，提供自定义菜单的基本编辑接口。")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Custom_Menus/Creating_Custom-Defined_Menu.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击访问"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("img",{attrs:{src:"https://img.shields.io/badge/-100%25-brightgreen.svg",alt:"Support"}})])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("PersonalizedMenuService")])]),t._v(" "),a("td",[t._v("个性化菜单服务，提供个性化菜单的相关接口。")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Custom_Menus/Personalized_menu_interface.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击访问"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("img",{attrs:{src:"https://img.shields.io/badge/-0%25-red.svg",alt:"Support"}})])])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-基础消息能力"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-基础消息能力"}},[t._v("#")]),t._v(" 3.2 基础消息能力")]),t._v(" "),a("p",[t._v("开发人员如果需要集成基础消息相关能力，只需要注入对应的服务即可。以下为具体的服务类型表，开发人员可自行参考文档进行注入使用。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型名称")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("微信官方文档")]),t._v(" "),a("th",[t._v("支持度")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("TemplateMessageService")])]),t._v(" "),a("td",[t._v("模板消息服务，提供模板消息相关接口。")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Template_Message_Interface.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击访问"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("img",{attrs:{src:"https://img.shields.io/badge/-85%25-orange.svg",alt:"Support"}})])])])]),t._v(" "),a("h3",{attrs:{id:"_3-3-用户管理服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-用户管理服务"}},[t._v("#")]),t._v(" 3.3 用户管理服务")]),t._v(" "),a("p",[t._v("开发人员如果需要使用用户管理服务，只需要注入对应的服务即可。以下为具体的服务类型表，开发人员可自行参考文档进行注入使用。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型名称")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("微信官方文档")]),t._v(" "),a("th",[t._v("支持度")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("UserTagService")])]),t._v(" "),a("td",[t._v("用户标签管理服务，提供粉丝标签管理相关接口。")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/User_Management/User_Tag_Management.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击访问"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("img",{attrs:{src:"https://img.shields.io/badge/-100%25-brightgreen.svg",alt:"Support"}})])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("BlackListService")])]),t._v(" "),a("td",[t._v("黑名单管理服务，管理公众号的黑名单。")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/User_Management/Manage_blacklist.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击访问"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("img",{attrs:{src:"https://img.shields.io/badge/-100%25-brightgreen.svg",alt:"Support"}})])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("UserManagementService")])]),t._v(" "),a("td",[t._v("用户管理服务，提供以下服务:"),a("br"),t._v("- 设置用户备注名。"),a("br"),t._v("- 获取用户基本信息(UnionID 机制)。"),a("br"),t._v("- 获取用户列表。")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/User_Management/Configuring_user_notes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击访问"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("img",{attrs:{src:"https://img.shields.io/badge/-100%25-brightgreen.svg",alt:"Support"}})])])])]),t._v(" "),a("h2",{attrs:{id:"四、如何实现其他未支持接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、如何实现其他未支持接口"}},[t._v("#")]),t._v(" 四、如何实现其他未支持接口")]),t._v(" "),a("p",[t._v("目前本仓库主要由 "),a("a",{attrs:{href:"https://github.com/real-zony",target:"_blank",rel:"noopener noreferrer"}},[t._v("real-zony"),a("OutboundLink")],1),t._v(" 进行维护，部分不支持的接口可能一时半会儿无法实现。你可以参考源码，继承 "),a("code",[t._v("CommonService")]),t._v(" 调用基类的 "),a("code",[t._v("WeChatOfficialApiRequester")]),t._v(" 对象发起 API 请求。")]),t._v(" "),a("p",[t._v("所有请求都需要实现 "),a("code",[t._v("OfficialCommonRequest")]),t._v(" 基类，所有响应都需要实现 "),a("code",[t._v("OfficialCommonResponse")]),t._v(" 基类。")])])}),[],!1,null,null,null);s.default=n.exports}}]);